###Mastery
MasterRecordDefinition org::legend::PersonMasterRecord
{
  modelClass: org::legend::Person;
  identityResolution:
  {
    modelClass: org::legend::Person;
    resolutionQueries:
      [
        {
          queries: [ {input: org::legend::Person[1]|org::legend::Person.all()->filter(person|$person.name == $input.name)}
                   ];
          keyType: Optional;
          precedence: 1;
        }
      ]
  }
  recordSources:
  [
    {
      id: 'test-source-id';
      description: 'Test Source';
      status: Development;
      parseService: org::legend::PersonService;
      transformService: org::legend::PersonService;
      partitions:
      [
        {
          id: 'test-partition-1';
        }
      ]
    }
  ]
}

###Pure
Class org::legend::Person
{
  name: String[0..1];
}

###Mapping
Mapping org::legend::PersonMapping
(
)

###Service
Service org::legend::PersonService
{
  pattern: 'person';
  documentation: 'Person test service';
  autoActivateUpdates: true;
  execution: Single
  {
    query: src: org::legend::Person[1]|$src.name;
    mapping: org::legend::PersonMapping;
    runtime:
    #{
      mappings:
      [
        org::legend::PersonMapping
      ];
    }#;
  }
  test: Single
  {
    data: 'test';
    asserts:
    [
    ];
  }
}
